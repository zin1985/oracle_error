# ORA-28000 - アカウントロックアウト
2024-10-27

## 1. ORA-28000 - アカウントロックアウトの概要

ORA-28000 は、Oracleデータベースにおいて、ユーザーアカウントがロックアウトされたことを示すエラーです。  ユーザーがパスワードを何度も間違って入力することで、セキュリティ上の措置としてアカウントが一時的にロックされ、データベースへのアクセスができなくなります。このエラーは、不正アクセスやブルートフォース攻撃を防ぐための重要なセーフガードとして機能します。しかし、正当なユーザーがパスワードを忘れていたり、タイピングミスを繰り返したりした場合にも発生するため、適切な対処が必要です。  ロックアウトの期間や試行回数の制限は、データベースの初期設定や、`profiles` パラメータによって制御されています。  このエラーが発生した場合、システム管理者への連絡が不可欠であり、迅速な対応が求められます。単純なパスワードの忘れ忘れだけでなく、潜在的なセキュリティ侵害の可能性も考慮する必要があるため、迅速かつ慎重な対応が重要です。


## 2. 原因

ORA-28000 エラーの主な原因は、ユーザーが指定したパスワードがデータベースに登録されているパスワードと一致しないため、ログイン試行が失敗し、許容される失敗回数を超えたことです。  これは、単純なタイピングミス、パスワードの記憶違い、あるいは故意の不正アクセス試行による可能性があります。  データベースの`profiles`に設定されたパスワードの検証失敗回数とロックアウト時間の設定を超えた場合に発生します。  例えば、`FAILED_LOGIN_ATTEMPTS` パラメータが5回に設定され、ロックアウト時間が1時間に設定されている場合、5回連続してログインに失敗すると、1時間の間、アカウントはロックアウトされます。  また、ネットワーク障害やデータベースサーバー側の問題が原因で、一時的にログインに失敗し、結果的にロックアウトになるケースも考えられます。  さらに、パスワードポリシーが厳しすぎる場合（例えば、パスワードの長さや複雑さの要件が高すぎる場合）、ユーザーが意図せず何度も失敗してしまう可能性も否定できません。


## 3. 解決方法

ORA-28000 エラーが発生した場合は、まずアカウントのロックアウト状況を確認する必要があります。  DBA に連絡し、アカウントのロック状態を確認してもらうことが最善策です。 DBA は、適切な権限を使って、ユーザーアカウントのロックを解除することができます。  SQL*Plus などのツールを使用して、`ALTER USER <username> ACCOUNT UNLOCK;` コマンドを実行することで、アカウントのロックを解除できます。 ただし、このコマンドを実行するには、十分な権限が必要です。

```sql
-- アカウントのロック解除
ALTER USER myuser ACCOUNT UNLOCK;
```

アカウントのロックが解除された後、正しいパスワードを使用して再度ログインを試みます。  もしパスワードを忘れてしまった場合は、パスワードの再設定手順に従う必要があります。  この手順は、Oracleデータベースのバージョンや設定によって異なりますが、多くの場合、データベース管理者によってパスワードの再設定が行われます。  パスワードを再設定する際には、複雑で推測されにくいパスワードを選択することが重要です。


## 4. 類似エラーとの違い

ORA-28000 は、アカウントロックアウトに特化したエラーコードです。  他のアカウント関連エラー、例えば ORA-01017 （無効なユーザー名/パスワード）とは、エラーメッセージの内容が異なります。  ORA-01017 は、パスワードが間違っているという事実だけを伝え、アカウントがロックされたかどうかは明示しません。  一方、ORA-28000 は、アカウントがロックアウトされたことを明確に示すため、問題の特定と解決に役立ちます。  他の認証関連エラーと比較しても、アカウントの利用停止状態を直接的に示す点で、ORA-28000 は明確なエラーコードと言えます。  システム管理者にとっては、この明確なエラーメッセージにより、問題の迅速な解決が可能になります。


## 5. 反省と対策

ORA-28000 エラーが発生した場合、パスワード管理の重要性を改めて認識する必要があります。  パスワードを安全に管理し、複雑で推測されにくいパスワードを選択することが不可欠です。  パスワードマネージャーの使用や、定期的なパスワード変更を推奨します。  また、タイピングミスによるログイン失敗を防ぐため、パスワードの入力補助機能を利用したり、注意深くパスワードを入力する習慣を身につける必要があります。  組織内では、パスワードポリシーを明確に定め、ユーザーに周知徹底させることが重要です。


## 6. 再発防止策

ORA-28000 の再発を防ぐためには、以下の対策が有効です。

* **強固なパスワードポリシーの導入と遵守**:  パスワードの長さ、複雑性、変更頻度に関する明確なポリシーを設定し、ユーザーに周知徹底します。
* **パスワードマネージャーの利用**:  複数のアカウントのパスワードを安全に管理するために、パスワードマネージャーの利用を推奨します。
* **ログイン試行制限の適切な設定**:  `profiles` パラメータで、失敗したログイン試行回数を適切に設定することで、ブルートフォース攻撃を防ぎます。
* **アカウントロックアウト時間の調整**:  `profiles` パラメータで、アカウントロックアウト時間を適切に設定することで、ロックアウトによる業務への影響を最小限に抑えます。
* **セキュリティ監査の強化**:  ログイン試行に関するログを監視し、不正アクセスを早期に検知します。
* **ユーザー教育**:  ユーザーに対して、パスワードの重要性、安全なパスワード管理方法、タイピングミスの回避方法などを教育します。


## 7. 関連リンクや根拠URL（可能な限り）

Oracle公式ドキュメントは、バージョンによって情報が異なります。  具体的なエラーメッセージや対処法については、ご自身のOracleデータベースのバージョンに対応したドキュメントを参照してください。  一般的に、Oracleのドキュメントサイトや、Oracleサポートに問い合わせることが有効です。  残念ながら、ORA-28000に関する個別ページは存在しない場合が多く、関連するプロファイルパラメータに関する情報を参照する必要があります。  具体的には、`FAILED_LOGIN_ATTEMPTS` や `PASSWORD_LIFE_TIME` などのパラメータに関するOracleドキュメントを探してください。